<!DOCTYPE html>
<html>
<head>
  <title>Dve Nedelje</title>
  <style>
    body {
      font-family: 'Segoe UI Light','Segoe UI',Tahoma,Helvetica,Sans-Serif,sans-serif;
      font-size: 12px;
    }
    h5 {
      font-size: 14px;
      margin-top: 10px;
      margin-bottom: 3px;
    }
  </style>
</head>
<body>
  <h5 id="firstWeekTitle">&nbsp;</h5>
  <div id="firstWeek"></div>

  <h5 id="secondWeekTitle">&nbsp;</h5>
  <div id="secondWeek"></div>

  <script>
    function generateWeeks(selector, teamMembers, isActiveWeek) {
      const daysOfWeek = ["Mon", "Tue", "Wed", "Thu", "Fri"];
      const today = new Date().getDay();

      for (let i = 0; i < daysOfWeek.length; i++) {
        let text = daysOfWeek[i];
        
        if (teamMembers && teamMembers[i]) {
          text += ` - ${teamMembers[i]}`;
        }

        if (isActiveWeek && today === (i + 1)) {
          document.querySelector(selector).innerHTML += `<b>${text}</b><br>`;
        } else {
          document.querySelector(selector).innerHTML += `${text}<br>`;
        }
      }
    }

    function updateTitleWithWeekNumber(selector, firstDay, isActiveWeek) {
      const lastDay = addDays(firstDay, 4);
      const weekNumber = CurrentWeekNumber(firstDay);
      const titleElement = document.querySelector(selector);
      titleElement.style.fontWeight = isActiveWeek ? 'bold' : 'normal';
      titleElement.innerHTML = `Week ${formatDate(firstDay)}-${formatDate(lastDay)} (${weekNumber}):`;
    }
  
    
    function getMonday(d) {
      const day = d.getDay();
      const diff = d.getDate() - day + (day === 0 ? -6 : 1);
      return new Date(d.setDate(diff));
    }

    function formatDate(date) {
      return `${date.getDate()}.${date.getMonth() + 1}`;
    }
    
    function CurrentWeekNumber(date) {
      return Math.ceil((date - new Date(date.getFullYear(), 0, 1)) / 604800000);
    }
    
    function IsFirstWeekCurrentWeek(date) {
      return CurrentWeekNumber(date) % 2 === 0;
    }

    function addDays(date, days) {
      const newDate = new Date(date);
      newDate.setDate(newDate.getDate() + days);
      return newDate;
    }

    const today = new Date();
    const isFirstWeekCurrentWeek = IsFirstWeekCurrentWeek(today);
    const isSecondWeekCurrentWeek = !isFirstWeekCurrentWeek;

    const firstWeekTeamMembers = ["Srđan Đilas", "Srđan Jokić", "Milan Lukić", "Siniša Radin", "Nemanja Svorcan"];
    const secondWeekTeamMembers = ["Radovan Škorić", "Milan Stojanović", "Mladen Arbutina", "Milan Stojanović", "Mladen Arbutina"];

    generateWeeks("#firstWeek", firstWeekTeamMembers, isFirstWeekCurrentWeek);
    generateWeeks("#secondWeek", secondWeekTeamMembers, isSecondWeekCurrentWeek);

    const thisMonday = getMonday(today);
    const firstMonday = isFirstWeekCurrentWeek ? new Date(thisMonday) : addDays(thisMonday, -7);
    const secondMonday = isSecondWeekCurrentWeek ? new Date(thisMonday) : addDays(thisMonday, 7)
    
    updateTitleWithWeekNumber("#firstWeekTitle", firstMonday, isFirstWeekCurrentWeek);
    updateTitleWithWeekNumber("#secondWeekTitle", secondMonday, isSecondWeekCurrentWeek);
  </script>
</body>
</html>
